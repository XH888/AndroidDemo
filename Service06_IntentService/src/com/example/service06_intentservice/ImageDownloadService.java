package com.example.service06_intentservice;import java.io.ByteArrayOutputStream;import java.io.IOException;import java.io.InputStream;import java.net.HttpURLConnection;import java.net.URL;import android.app.IntentService;import android.content.Intent;import android.util.Log;public class ImageDownloadService extends IntentService {	public ImageDownloadService() {		//指定线程名称；		super(null);	}	@Override	public void onCreate() {		super.onCreate();		Log.i("info", "-- onCreate --");	}		@Override	public int onStartCommand(Intent intent, int flags, int startId) {		Log.i("info", "-- onStartCommand --");		return super.onStartCommand(intent, flags, startId);	}		@Override	protected void onHandleIntent(Intent intent) {		Log.i("info", "-- onHandleIntent --");				String path = intent.getStringExtra(Config.EXT_PATH);		//下载图片		try {			HttpURLConnection connect = (HttpURLConnection) new URL(path).openConnection();			if(connect.getResponseCode() == 200){				InputStream is = connect.getInputStream();				byte[] bytes = new byte[is.available()];				ByteArrayOutputStream baos = new ByteArrayOutputStream();				int len =-1;				while((len = is.read(bytes)) !=-1){					baos.write(bytes, 0, len);				}								bytes = baos.toByteArray();												Intent imgIntent = new Intent(Config.ACTION_IMG);				imgIntent.putExtra(Config.EXT_IMG, bytes);				imgIntent.putExtra(Config.EXT_PATH, path);				sendBroadcast(imgIntent);			}		} catch (Exception e) {			// TODO Auto-generated catch block			e.printStackTrace();		}				}	@Override	public void onDestroy() {		Log.i("info", "-- onDestroy --");		super.onDestroy();	}}